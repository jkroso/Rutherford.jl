#!/usr/bin/env julia --color=yes
@require "github.com/jkroso/Rutherford.jl" App Window couple
@require "github.com/jkroso/Electron.jl" latest
@require "github.com/jkroso/SimpleCLI.jl" @CLI

"Creates an Electron window and displays the UI defined in `file` on it"
@CLI (file::String; version::VersionNumber=latest())

const path = joinpath(pwd(), file)
const mod = Module(Symbol(:â­’, file))

const ui = eval(mod, Expr(:toplevel,
                          :(using Kip),
                          :(eval(x) = Main.Core.eval($mod, x)),
                          :(eval(m, x) = Main.Core.eval(m, x)),
                          :(include($path))))

const window = Window(App(file, version=version))
couple(window, ui)

wait(window)
